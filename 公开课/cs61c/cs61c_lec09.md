`lec09.pdf`文件是关于计算机科学61C春季2022课程的一部分，由McMahon和Weaver教授，主要讨论了编译、汇编、链接和加载（CALL）的过程，以及如何将高级语言翻译成RISC-V汇编语言。以下是该讲座的详细内容：

1. **CALL链介绍**：
   - CALL链是指将高级语言代码转换成机器语言所经历的一系列步骤，包括编译（Compiler）、汇编（Assembler）、链接（Linker）和加载（Loader）。

2. **翻译复杂示例**：
   - 通过一个C语言的`map`函数示例，展示了如何将其翻译成RISC-V汇编语言。这个函数通过递归方式，对链表中的每个元素应用一个函数。

3. **解释与编译**：
   - 解释了解释型语言和编译型语言的区别。解释型语言直接执行源代码，而编译型语言先将源代码转换成另一种语言的等价程序。

4. **存储方案决策**：
   - 确定了哪些变量应该放在寄存器中。在这个例子中，`lst`、`f`和`newcell`是局部变量，需要在函数调用之间保持存活，因此它们被放在了callee-saved寄存器中。

5. **函数序言（Preamble）**：
   - 展示了如何在函数开始时调整栈指针、保存`ra`和其它需要的寄存器。

6. **递归调用map**：
   - 详细解释了如何进行早期退出（如果`lst`为NULL）、如何调用`malloc`分配内存、如何调用函数`f`以及如何递归调用`map`函数。

7. **清理与返回**：
   - 展示了如何在函数结束前恢复寄存器状态、调整栈指针，并使用`jr`指令返回。

8. **完整代码示例**：
   - 提供了上述`map`函数的完整RISC-V汇编语言实现。

9. **不同级别的表示/解释**：
   - 讨论了从高级语言到汇编语言，再到机器语言的不同表示级别，以及编译器、汇编器和机器解释器的角色。

10. **语言执行连续体**：
    - 描述了从易编程但效率较低的解释型语言到难编程但效率较高的编译型语言的连续体。

11. **解释与翻译**：
    - 对比了解释器和翻译器的优缺点，解释器提供更好的错误消息和跨平台兼容性，而翻译器通常提供更高的性能。

12. **编译C程序的步骤**：
    - 描述了从C语言代码到汇编语言代码的编译过程，包括词法分析、语法分析、语义分析和优化、代码生成等步骤。

13. **汇编器**：
    - 汇编器将汇编语言代码转换成机器语言代码，并创建对象文件。

14. **伪指令替换**：
    - 汇编器如何处理伪指令，例如`j`标签转换为`jal x0 标签`。

15. **产生机器语言**：
    - 讨论了如何将汇编指令转换为机器语言，包括处理分支、跳转和绝对地址引用。

16. **符号表和重定位表**：
    - 符号表列出了当前文件中可能被其他文件使用的项，而重定位表列出了当前文件稍后需要地址的项。

17. **对象文件格式**：
    - 描述了对象文件的格式，包括对象文件头、文本段、数据段、重定位信息、符号表和调试信息。

18. **链接器**：
    - 链接器如何将多个对象文件组合成一个可执行文件，并解决绝对地址。

19. **加载器**：
    - 加载器负责将可执行文件加载到内存中并开始执行。

20. **整数乘法和除法**：
    - 讨论了RISC-V中整数乘法和除法的实现，包括使用`mul`、`mulh`、`div`和`rem`指令。

21. **可选的RISC-V 16位压缩ISA**：
    - 提供了关于RISC-V 16位压缩指令集的额外信息，这是一种优化，用于最常见的指令模式。

这个讲座涵盖了计算机系统底层的许多关键概念，对于理解程序是如何被编译、链接和执行的非常有帮助。
